import{X as e,Y as s,u as a,Z as o,B as t,o as i,a as n,w as c,g as r,d,f as l,D as u}from"./index-bee1be5a.js";import{_ as f}from"./_plugin-vue_export-helper.1b428a4d.js";const p=f({data:()=>({}),methods:{login(){uni.getUserProfile&&uni.getUserProfile({lang:"zh_CN",desc:"用来授权登录该小程序！",success:i=>{e({provider:"weixin",onlyAuthorize:!0,success:function(e){const{code:n}=e;s({url:"https://api.weixin.qq.com/sns/jscode2session",method:"GET",data:{appid:"wx61baab1c4aae2e47",secret:"c68984e75aadd11d80b3fb78cc087aff",js_code:n,grant_type:"authorization_code"},success:e=>{const s=a(),{data:n}=e;s.setToken(n.openid),s.fillUser(i.userInfo),o({title:"登录成功"}),t({url:"/pages/my/my"})}})},fail:function(e){o({title:"登录失败"})}})}})}}},[["render",function(e,s,a,o,t,f){const p=u,m=r;return i(),n(m,{class:"container"},{default:c((()=>[d(p,{type:"primary",onClick:f.login},{default:c((()=>[l("微信授权登录")])),_:1},8,["onClick"])])),_:1})}]]);export{p as default};
